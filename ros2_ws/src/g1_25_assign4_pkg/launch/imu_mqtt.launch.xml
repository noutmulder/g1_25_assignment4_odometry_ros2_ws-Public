<?xml version="1.0"?>
<!--
Launch file for IMU sensor package - MQTT/Wireless mode

This launch file starts:
1. MQTT Bridge Node - Receives IMU data from MQTT broker and publishes to ROS2 topics
2. Database Node - Subscribes to ROS2 topics and stores data in SQLite

Usage:
    ros2 launch imu_sensor_pkg imu_mqtt.launch.xml

With custom MQTT broker:
    ros2 launch imu_sensor_pkg imu_mqtt.launch.xml mqtt_broker:=192.168.1.100 mqtt_port:=1883
-->
<launch>
    <!-- Launch Arguments -->
    <arg name="mqtt_broker" default="localhost" description="MQTT broker hostname or IP address"/>
    <arg name="mqtt_port" default="1883" description="MQTT broker port"/>
    <arg name="mqtt_topic" default="esp32/imu/data" description="MQTT topic to subscribe to"/>
    <arg name="db_path" default="/tmp/imu_data.db" description="Path to SQLite database file"/>

    <!-- MQTT Bridge Node -->
    <node pkg="g1_25_assign4_pkg" exec="mqtt_imu_bridge" name="mqtt_imu_bridge" output="screen">
        <param name="mqtt_broker" value="$(var mqtt_broker)"/>
        <param name="mqtt_port" value="$(var mqtt_port)"/>
        <param name="mqtt_topic" value="$(var mqtt_topic)"/>
    </node>

    <!-- Database Subscriber Node -->
    <node pkg="g1_25_assign4_pkg" exec="imu_database_node" name="imu_database_node" output="screen">
        <param name="database_path" value="$(var db_path)"/>
    </node>
</launch>
